## API Gateway

Гейтвей сервис выступает в роли edge сервера, с которым напрямую общаются клиенты.

Он регистрируется в дискавери сервис и "знает" все внутренние адреса других сервисов.
Все маршуты прописаны в application.yml файле.

Получая запрс - сервис проверяет путь запроса и в зависимости от маршута - передает запрос в один из нижестоящих сервисов.
Если есть несколько инстансов, то запросы идут по round robbin балансировке - по очереди в каждый инстанс.

Также на гейтвее используется рейт лимитер  с сохранением промежуточного состояния в редисе. Рейт лимит идет по ip пользователя.

## Безопасность
За регистрацию, вход (выдачу токенов) отвечает сервис аутентификации. Но гейтвей сервис знает ключ для проверки access токена.

На защищенных эндпоинтах стоит фильтр, который 
проверяет и валидирует подпись access токена и то - просрочен он или нет. В случае 
корректной подписи - запрос идет дальше. Иначе возвращается 401 статус.

В случае успешной проверки гейтвей сервис устанавливает заголовок X-Authorized-User внутри которого содержится Id пользователя. С этим заголовком запрос оптравляется на следующие сервисы, где они могут работать с авторизованным пользователем.

Так же гейтвей сервер проверяет CORS загаловки, для этого frontend origin указывается в application.yml файле